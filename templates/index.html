<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NHL Team Roster Viewer</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .team-logo { height: 32px; vertical-align: middle; margin-right: 10px; }
        .roster-card { border: 1px solid #ccc; padding: 10px; margin: 10px 0; display: flex; align-items: center; }
        .roster-card img { height: 80px; width: 80px; margin-right: 10px; object-fit: cover; }
    </style>
</head>
<body>
    <h1>NHL Team Roster Viewer</h1>

    <label for="teamSelect">Select a Team:</label>
    <select id="teamSelect">
        <option value="">--Select a Team--</option>
        {% for team in teams %}
            <option value="{{ team.abbreviation }}">{{ team.name }}</option>
        {% endfor %}
    </select>

    <div id="rosterContainer">
        <!-- Roster will be loaded here -->
    </div>

    <script>
        document.getElementById('teamSelect').addEventListener('change', function() {
            const teamAbbrev = this.value;
            const container = document.getElementById('rosterContainer');
            container.innerHTML = '';

            if (!teamAbbrev) return;

            fetch(`/roster/${teamAbbrev}`)
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        container.innerHTML = `<p style="color:red;">${data.error}</p>`;
                        return;
                    }

                    if (data.length === 0) {
                        container.innerHTML = '<p>No roster data available.</p>';
                        return;
                    }

                    data.forEach(player => {
                        const card = document.createElement('div');
                        card.className = 'roster-card';
                        card.innerHTML = `
                            <img src="${player.headshot}" alt="${player.name}">
                            <div>
                                <strong>#${player.number} ${player.name}</strong><br>
                                Position: ${player.position}<br>
                                Shoots/Catches: ${player.shootsCatches}<br>
                                Height: ${player.height} | Weight: ${player.weight}<br>
                                Birthdate: ${player.birthDate} (${player.birthPlace})
                            </div>
                        `;
                        container.appendChild(card);
                    });
                })
                .catch(err => {
                    console.error(err);
                    container.innerHTML = '<p style="color:red;">Error loading roster.</p>';
                });
        });
    </script>
</body>
</html>
